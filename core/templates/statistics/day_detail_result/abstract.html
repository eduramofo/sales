{% load humanize %}

<div class="card border-primary mb-3">
  <div class="card-header h5"><strong>Leads (perdidos / entrevistas)</strong></div>
  <div class="card-body text-primary">
    <h5 class="card-title">
        Foram necessários se perder <strong class="text-danger">{{abstract.kpi_perdidos_entrevistas}}</strong> leads pra se fazer uma entrevista
    </h5>
    <p class="card-text">Quanto menor, melhor. Referência: <strong>3</strong> leads perdidos.</p>
  </div>
</div>

<table class="table table-bordered table-striped">

    <thead>
        <tr>
            <th scope="col" colspan="3" class="text-center bg-secondary text-white">Sumário do Dia</th>
        </tr>
    </thead>

    <thead>

        <tr>
            <th scope="col">Descrição da Variável</th>
            <th scope="col">Valores</th>
            <th scope="col">(%)</th>
        </tr>
        
    </thead>

    <tbody>

        <tr>
            <td>Leads</td>
            <td>{{abstract.leads_processed}}</td>
            <td>{{abstract.leads_processed_per}}</td>
        </tr>

        <tr>
            <td>Perdidos</td>
            <td>{{abstract.leads_lost}}</td>
            <td>{{abstract.leads_lost_per}}</td>
        </tr>

        <tr>
            <td>Ganho</td>
            <td>{{abstract.leads_win}}</td>
            <td>{{abstract.leads_win_per}}</td>
        </tr>

        <tr>
            <td>Atividades</td>
            <td>{{abstract.activities}}</td>
            <td>N/A</td>
        </tr>

        <tr>
            <td>Atividades/Leads</td>
            <td>{{abstract.activities_leads}}</td>
            <td>N/A</td>
        </tr>

    </tbody>

</table>


<table class="table table-bordered table-striped">

    <thead>
        <tr>
            <th scope="col" colspan="3" class="text-center bg-secondary text-white">Detalhamento das Perdas</th>
        </tr>
    </thead>

    <thead>

        <tr>
            <th scope="col">Descrição da Variável</th>
            <th scope="col">Valores</th>
            <th scope="col">(%)</th>
        </tr>
        
    </thead>

    <tbody>

        <tr>
            <td>Total</td>
            <td>{{abstract.leads_lost}}</td>
            <td>{{abstract.leads_lost_lost_per}}</td>
        </tr>

        <tr>
            <td>Sem interesse</td>
            <td>{{abstract.leads_lost_lost_sem_interesse}}</td>
            <td>{{abstract.leads_lost_lost_sem_interesse_per}}</td>
        </tr>

        <tr>
            <td>Não passou na DI</td>
            <td>{{abstract.leads_lost_lost_di}}</td>
            <td>{{abstract.leads_lost_lost_di_per}}</td>
        </tr>

        <tr>
            <td>Entrevista</td>
            <td>{{abstract.leads_lost_lost_entrevista}}</td>
            <td>{{abstract.leads_lost_lost_entrevista_per}}</td>
        </tr>

    </tbody>

</table>

<div class="w-100 border border-dark rounded p-3 mb-3">

    <h5 class="mb-3">Funil</h5>

    <h6 class="text-dark m-0 p-0 mb-2">Leads: <span class="text-danger">{{abstract.leads_processed}}</span></h6>
    <div style="height: 30px;" class="progress">
        <div class="progress-bar bg-primary" role="progressbar"
        style="width: 100%;"
        aria-valuenow="100"
        aria-valuemin="0"
        aria-valuemax="100"><strong>100%</strong>
        </div>
    </div>

    <h6 class="text-dark m-0 p-0 mt-3 mb-2">Perdidos: <span class="text-danger">{{abstract.leads_lost}}</span></h6>
    <div style="height: 30px;" class="progress">
        <div class="progress-bar bg-dark" role="progressbar"
        style="width: {{abstract.leads_lost_per|floatformat:0|intcomma }}%" 
        aria-valuenow="{{abstract.leads_lost_per|floatformat:0|intcomma }}"
        aria-valuemin="0"
        aria-valuemax="100"><strong>{{abstract.leads_lost_per|floatformat:0|intcomma }}%</strong>
        </div>
    </div>

    <h6 class="text-dark m-0 p-0 mt-3 mb-2">Sem interesse: <span class="text-danger">{{abstract.leads_lost_sem_interesse}}</span></h6>
    <div style="height: 30px;" class="progress">
        <div class="progress-bar bg-info" role="progressbar"
        style="width: {{abstract.leads_lost_sem_interesse_per|floatformat:0|intcomma }}%" 
        aria-valuenow="{{abstract.leads_lost_sem_interesse_per|floatformat:0|intcomma }}"
        aria-valuemin="0"
        aria-valuemax="100"><strong>{{abstract.leads_lost_sem_interesse_per|floatformat:0|intcomma }}%</strong>
        </div>
    </div>

    <h6 class="text-dark m-0 p-0 mt-3 mb-2">DI: <span class="text-danger">{{abstract.leads_lost_di}}</span></h6>
    <div style="height: 30px;" class="progress">
        <div class="progress-bar bg-warning" role="progressbar"
        style="width: {{abstract.leads_lost_di_per|floatformat:0|intcomma }}%"
        aria-valuenow="{{abstract.leads_lost_di_per|floatformat:0|intcomma }}"
        aria-valuemin="0"
        aria-valuemax="100"><strong>{{abstract.leads_lost_di_per}}%</strong>
        </div>
    </div>

    <h6 class="text-dark m-0 p-0 mt-3 mb-2">Entrevistas perdidas: <span class="text-danger">{{abstract.leads_lost_entrevistas}}</span></h6>
    <div style="height: 30px;" class="progress">
        <div class="progress-bar bg-danger" role="progressbar"
        style="width: {{abstract.leads_lost_entrevistas_per|floatformat:0|intcomma }}%"
        aria-valuenow="{{abstract.leads_lost_entrevistas_per|floatformat:0|intcomma }}"
        aria-valuemin="0"
        aria-valuemax="100"><strong>{{abstract.leads_lost_entrevistas_per|floatformat:0|intcomma }}%</strong>
        </div>
    </div>

    <h6 class="text-dark m-0 p-0 mt-3 mb-2">Matrículas: <span class="text-danger">{{abstract.leads_win}}</span></h6>
    <div style="height: 30px;" class="progress">
        <div class="progress-bar bg-success" role="progressbar"
        style="width: {{abstract.leads_win_per|floatformat:0|intcomma }}%"
        aria-valuenow="{{abstract.leads_win_per|floatformat:0|intcomma }}"
        aria-valuemin="0"
        aria-valuemax="100"><strong>{{abstract.leads_win_per|floatformat:0|intcomma }}%</strong>
        </div>
    </div>

</div>
